<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>高中题库管理系统</title>
    <style>
        /* 保持原有样式不变 */
        .container { display: flex; height: 100vh; }
        .directory-tree { width: 300px; background: #fff; padding: 20px; }
        .question-area { flex: 1; padding: 20px; }
        .modal { /* 弹窗样式 */ }
    </style>
</head>
<body>
    <div class="container">
        <div class="directory-tree" id="tree"></div>
        <div class="question-area" id="questions">
            <h2>题目列表</h2>
            <div id="questionList"></div>
        </div>
        
        <!-- 添加题目弹窗 -->
        <div class="modal" id="questionModal">
            <form id="questionForm" enctype="multipart/form-data">
                <input type="text" name="content" placeholder="题目内容">
                <textarea name="answer" placeholder="参考答案"></textarea>
                <input type="file" name="image">
                <button type="button" onclick="submitQuestion()">提交</button>
            </form>
        </div>
    </div>

    <script>
        // 初始化加载树结构
        fetch('/api/tree')
            .then(res => res.json())
            .then(data => renderTree(data));

        // 渲染目录树
        function renderTree(data) {
            const treeContainer = document.getElementById('tree');
            // 树形结构渲染逻辑（同前）
        }

        // 提交题目
        function submitQuestion() {
            const formData = new FormData(document.getElementById('questionForm'));
            
            fetch('/api/questions', {
                method: 'POST',
                body: formData
            }).then(() => {
                loadQuestions(currentKnowledgeId);
                hideModal();
            });
        }

        // 加载题目
        function loadQuestions(knowledgeId) {
            fetch(`/api/questions?knowledge_id=${knowledgeId}`)
                .then(res => res.json())
                .then(questions => {
                    const list = document.getElementById('questionList');
                    list.innerHTML = questions.map(q => `
                        <div class="question">
                            <p>${q.content}</p>
                            ${q.image_url ? `<img src="/uploads/${q.image_url}">` : ''}
                            <div class="answer">答案：${q.answer}</div>
                        </div>
                    `).join('');
                });
        }
    </script>
</body>
</html>
